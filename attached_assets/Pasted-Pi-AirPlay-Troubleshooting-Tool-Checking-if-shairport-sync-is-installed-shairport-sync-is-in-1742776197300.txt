Pi-AirPlay Troubleshooting Tool

→ Checking if shairport-sync is installed...
✓ shairport-sync is installed.
   Version: 4.3.7-2-ga2326f32-OpenSSL-Avahi-ALSA-metadata-sysconfdir:/usr/local/etc

→ Checking metadata pipe...
✓ Metadata pipe exists.
   Permissions: 666 (correct)

→ Checking if shairport-sync is running...
✗ Error: shairport-sync is not running.

→ Checking if Pi-AirPlay web interface is running...
✓ Pi-AirPlay web interface is running.
   Process: root       18528       1  2 20:26 ?        00:00:02 python3 app_airplay.py --port 8000 --host 0.0.0.0
ivpi       20587       1 99 20:28 ?        00:00:01 /usr/bin/python3 /home/ivpi/pi-airplay/app_airplay.py --port 8000 --host 0.0.0.0

→ Checking systemd service status...
✓ shairport-sync.service is enabled.
✓ pi-airplay.service is enabled.

→ Checking audio devices...
Available audio devices:
**** List of PLAYBACK Hardware Devices ****
card 0: Headphones [bcm2835 Headphones], device 0: bcm2835 Headphones [bcm2835 Headphones]
  Subdevices: 8/8
  Subdevice #0: subdevice #0
  Subdevice #1: subdevice #1
  Subdevice #2: subdevice #2
  Subdevice #3: subdevice #3
  Subdevice #4: subdevice #4
  Subdevice #5: subdevice #5
  Subdevice #6: subdevice #6
  Subdevice #7: subdevice #7
card 1: vc4hdmi0 [vc4-hdmi-0], device 0: MAI PCM i2s-hifi-0 [MAI PCM i2s-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 2: vc4hdmi1 [vc4-hdmi-1], device 0: MAI PCM i2s-hifi-0 [MAI PCM i2s-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 4: IQaudIODAC [IQaudIODAC], device 0: IQaudIO DAC HiFi pcm512x-hifi-0 [IQaudIO DAC HiFi pcm512x-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0

→ Checking Avahi daemon...
✓ Avahi daemon is running.

Recovery Options:
1. Restart both services:
   sudo systemctl restart shairport-sync.service
   sudo systemctl restart pi-airplay.service

2. Fix permissions for metadata pipe:
   sudo rm /tmp/shairport-sync-metadata
   sudo mkfifo /tmp/shairport-sync-metadata
   sudo chmod 666 /tmp/shairport-sync-metadata

3. Run services manually for debugging:
   shairport-sync -c config/shairport-sync.conf -m dummy -o alsa -- -d default
   python3 app_airplay.py --port 8000 --host 0.0.0.0

Need more help? Check the README.md for detailed instructions.
ivpi@pi:~/pi-airplay $
